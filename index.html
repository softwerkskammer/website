<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Software Craft Communities</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

<style>
  html, body {
    height: 100%;
    margin: 0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    background: #f5f6fa;
    color: #333;
    display: flex;
    flex-direction: column;
  }

  /* Header */
  .header {
    z-index: 3;
    background: rgba(255,255,255,0.95);
    padding: 12px 24px;
    border-radius: 20px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    font-weight: 600;
    font-size: 1.2rem;
    margin: 20px auto 0;
    position: relative;
  }

  /* Map container fills remaining space */
  #map {
    flex: 1; /* takes all available space between header and footer */
    position: relative;
    z-index: 1;
  }

  /* Marker glow */
  .glow-marker {
    filter: drop-shadow(0 0 5px #00b894)
            drop-shadow(0 0 10px rgba(0,184,148,0.6));
    transition: 0.3s ease;
  }
  .glow-marker:hover {
    filter: drop-shadow(0 0 10px #00d9a1)
            drop-shadow(0 0 20px rgba(0,217,161,0.9));
  }

  /* Popup style */
  .leaflet-popup-content-wrapper {
    background: #ffffff;
    color: #2d3436;
    border-radius: 10px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
  }
  .leaflet-popup-tip {
    background: #ffffff;
  }
  .popup-link a {
    color: #00b894;
    text-decoration: none;
    font-weight: 600;
  }
  .popup-link a:hover {
    color: #00d9a1;
  }

  /* Footer */
  footer {
    text-align: center;
    padding: 20px;
    color: #636e72;
    font-size: 0.9rem;
    background: rgba(255,255,255,0.7);
    backdrop-filter: blur(5px);
  }
</style>
</head>
<body>

<div class="header">Software Craft Communities — Germany, Austria, Switzerland</div>

<div id="map"></div>

<footer>
  Built with ❤️ for the Software Craft Community<br />
  Communities are maintained via GitHub.
  Found a missing one? Open a Pull Request ✨
  <br />
  <a href="https://github.com/softwerkskammer/website/" target="_blank">
    github.com/softwerkskammer/website
  </a>
</footer>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
  const map = L.map('map', { zoomControl: true });

  L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
    attribution: '&copy; OpenStreetMap contributors &copy; CARTO',
    subdomains: 'abcd',
    maxZoom: 19
  }).addTo(map);

  fetch('locations.json')
    .then(response => response.json())
    .then(locations => {
      const markerGroup = L.featureGroup();

      locations.forEach(loc => {
        const marker = L.circleMarker([loc.lat, loc.lon], {
          radius: 7,
          color: "#00b894",
          fillColor: "#00b894",
          fillOpacity: 1,
          weight: 1,
          className: "glow-marker"
        }).bindPopup(
          `<div class="popup-link">
            <strong><a href="${loc.url}" target="_blank">${loc.name}</a></strong>
          </div>`
        );
        marker.addTo(markerGroup);
      });

      markerGroup.addTo(map);
      map.fitBounds(markerGroup.getBounds(), { padding: [50,50] });
    })
    .catch(err => console.error("Failed to load locations:", err));

  const markerGroup = L.featureGroup();

</script>

</body>
</html>
